## Access Token vs Refresh Token

<br/>

### 1. **Access Token**

- **역할**: Access 토큰은 유저가 인증을 받은 후, 서버에 인증된 상태임을 증명하는 데 사용한다.
- **유효 기간**: 짧은 유효 기간을 가진다. 보통 몇 분에서 몇 시간 정도.
  - 이유: 짧은 유효 기간 덕분에 토큰이 탈취되더라도, 해커가 사용할 수 있는 시간이 매우 짧아진다.
- **사용 위치**: 클라이언트가 서버에 API 요청을 보낼 때마다 Access 토큰을 헤더에 포함시켜 전송한다.
  - 예를 들어, 클라이언트가 로그인한 후 프로필 정보나 사용자 데이터를 요청할 때 Access 토큰을 사용한다.
- **보안**: 보통 Bearer 토큰으로 헤더에 포함되며, 주로 HTTP 요청을 통해 전송된다.

<br/>

### 2. **Refresh Token**

- **역할**: Access 토큰이 만료되었을 때, 유저가 다시 로그인하지 않고 새로운 Access 토큰을 발급받을 수 있도록 하는 데 사용한다.
- **유효 기간**: 매우 긴 유효 기간을 가진다. 보통 몇 주에서 몇 달까지.
  - 이유: 유저가 자주 로그인하지 않고도 계속해서 새로운 Access 토큰을 발급받아 사용할 수 있도록 하기 위함이다.
- **사용 위치**: Access 토큰이 만료되었을 때, 클라이언트는 Refresh 토큰을 서버에 보내고, 서버는 새로운 Access 토큰을 발급해 준다.
- **보안**: Refresh 토큰은 보통 서버에 저장되거나, 쿠키 또는 로컬 스토리지에 저장된다. Refresh 토큰은 유효 기간이 길기 때문에, 안전하게 보관하는 것이 매우 중요하다.

<br/>

### 3. **Access 토큰과 Refresh 토큰의 차이**

| 항목                 | **Access Token**                            | **Refresh Token**                             |
|----------------------|---------------------------------------------|----------------------------------------------|
| **역할**              | 인증된 사용자를 증명하기 위해 사용됨          | 새로운 Access 토큰을 발급받기 위해 사용됨      |
| **유효 기간**         | 짧음 (몇 분 ~ 몇 시간)                      | 김 (몇 주 ~ 몇 달)                            |
| **사용 빈도**         | 거의 모든 요청마다 사용됨                   | Access 토큰이 만료되었을 때만 사용됨          |
| **보관 위치**         | 주로 HTTP 요청 헤더에 포함됨                | 주로 서버 또는 안전한 클라이언트 저장소에 저장됨 |
| **보안 위험**         | 짧은 유효 기간 덕분에 탈취 위험이 적음         | 긴 유효 기간 때문에 탈취 시 더 큰 위험이 있음  |
| **발급 방식**         | 로그인이 성공하면 서버에서 발급됨            | Access 토큰 만료 시 서버에 요청해 발급됨       |

<br/>

### 4. **Access 토큰과 Refresh 토큰의 사용 흐름**

<img width="400" alt="image" src="https://github.com/user-attachments/assets/b98a17dd-3718-4aee-aed3-332820f4375e">

<br/>
<br/>

1. 사용자가 로그인하면, 서버는 Access 토큰과 Refresh 토큰을 클라이언트에 발급한다.
2. 클라이언트는 Access 토큰을 사용해서 API 요청을 보낸다.
3. Access 토큰이 만료되면, 클라이언트는 Refresh 토큰을 서버에 보내서 새로운 Access 토큰을 발급받는다.
4. Refresh 토큰 자체도 만료되면, 유저는 다시 로그인해야 한다.

<br/>

### 5. **왜 두 가지 토큰을 사용할까?**

- **보안과 유연성**: Access 토큰의 짧은 유효 기간 덕분에 탈취되더라도 위험이 작아지고, Refresh 토큰을 통해 사용자 경험을 유지하면서 자주 로그인을 요구하지 않게 한다.
- **탈취 위험 관리**: Refresh 토큰은 더 길게 유효하지만, 탈취 시 위험이 크기 때문에 더 안전하게 저장할 필요가 있다. 보통 서버 측에서 관리하거나, 쿠키에 안전하게 저장하고, HTTP 전송 시 암호화(HTTPS)를 통해 보호한다.

